!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("@angular/core"),require("@angular/common/http"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@narra/api",["exports","rxjs","@angular/core","@angular/common/http","rxjs/operators"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self).narra=e.narra||{},e.narra.api={}),e.rxjs,e.ng.core,e.ng.common.http,e.rxjs.operators)}(this,(function(e,r,t,n,o){"use strict";var i,p,c,s,a;!function(e){e.pending="pending",e.running="running",e.done="done"}(i||(i={})),function(e){e.text="text",e.audio="audio",e.video="video",e.picture="picture"}(p||(p={})),function(e){e.or="or",e.and="and"}(c||(c={})),function(e){e.admin="admin",e.author="author"}(s||(s={})),function(e){e.project="project",e.library="library"}(a||(a={}));var h=function(){function e(){}return e.handleError=function(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("Backend returned code "+e.status+", body was: "+e.error),r.throwError("Something bad happened; please try again later.")},e}(),u=function(){function e(){}return e.getMeta=function(e,r){return e.metadata.find((function(e){return e.name===r}))},e}(),y=function(){function e(){this.server="http://api.narra",this.version=1,this.initialized=!1}return e.prototype.initialize=function(e,r){e&&(this.server=e),r&&(this.version=r),this.initialized=!0},Object.defineProperty(e.prototype,"apiServer",{get:function(){return this.server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiVersion",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.initialized},enumerable:!1,configurable:!0}),e.prototype.query=function(e,r,t,n,o){var i=e+"?";return r&&r.filters.forEach((function(e){i+="filters[]="+e+"&"})),o&&o.forEach((function(e){e.content.forEach((function(r){i+=e.name+"[]="+r+"&"}))})),n&&(i+="query="+n.query+"&",n.queryOperator&&(i+="query_operator="+n.queryOperator+"&"),n.queryFields&&n.queryFields.forEach((function(e){i+="query_fields[]="+e+"&"}))),t&&(i+="page="+t.page+"&per_page="+t.perPage+"&offset="+t.offset),this.server+"/v"+this.version+"/"+i},e}();y.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new y},token:y,providedIn:"root"}),y.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],y.ctorParameters=function(){return[]};var d=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getActions=function(e){return this.http.get(this.serverService.query("actions",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.performAction=function(e,r,t){return this.http.post(this.serverService.query("actions/"+r.identifier+"/perform",t),{items:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e}();d.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new d(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:d,providedIn:"root"}),d.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var v=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getConnectors=function(e){return this.http.get(this.serverService.query("connectors",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();v.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new v(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:v,providedIn:"root"}),v.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var f=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getEvents=function(e,r){return void 0===e&&(e="me"),this.http.get(this.serverService.query("events/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e}();f.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new f(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:f,providedIn:"root"}),f.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var l=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getGenerators=function(e){return this.http.get(this.serverService.query("generators",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();l.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new l(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:l,providedIn:"root"}),l.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var g=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.check=function(e,r){return this.http.post(this.serverService.query("items/check",r),{url:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addItems=function(e,r){return this.http.post(this.serverService.query("items/new",r),{candidates:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getItem=function(e,r){return this.http.get(this.serverService.query("items/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addItemMeta=function(e,r,t){return this.http.post(this.serverService.query("items/"+e+"/metadata/new",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateItemMeta=function(e,r,t){return this.http.post(this.serverService.query("items/"+e+"/metadata/"+r.name+"/update",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteItemMeta=function(e,r){return this.http.get(this.serverService.query("items/"+e+"/metadata/"+r.name+"/delete?generator="+r.generator)).pipe(o.retry(1),o.catchError(h.handleError))},e}();g.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new g(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:g,providedIn:"root"}),g.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],g.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var E=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.validate=function(e,r){return this.http.post(this.serverService.query("libraries/validate",r),{name:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLibraries=function(e){return this.http.get(this.serverService.query("libraries",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLibrary=function(e,r){return this.http.get(this.serverService.query("libraries/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getItems=function(e,r,t,n){return this.http.get(this.serverService.query("libraries/"+e+"/items",r,t,n)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteItems=function(e,r){return this.http.post(this.serverService.query("libraries/"+e+"/items/delete"),{items:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addLibrary=function(e,r){return this.http.post(this.serverService.query("libraries/new",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateLibrary=function(e,r){return this.http.post(this.serverService.query("libraries/"+e.id+"/update",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.cleanLibrary=function(e){return this.http.get(this.serverService.query("libraries/"+e+"/clean")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteLibrary=function(e){return this.http.get(this.serverService.query("libraries/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.exportLibrary=function(e){return this.http.get(this.serverService.query("libraries/"+e+"/export")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.importLibrary=function(e,r){var t=new FormData;return t.append("file",r),this.http.post(this.serverService.query("libraries/"+e+"/import"),t,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addLibraryMeta=function(e,r,t){return this.http.post(this.serverService.query("libraries/"+e+"/metadata/new",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateLibraryMeta=function(e,r,t){return this.http.post(this.serverService.query("libraries/"+e+"/metadata/"+r.name+"/update",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteLibraryMeta=function(e,r){return this.http.get(this.serverService.query("libraries/"+e+"/metadata/"+r.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e}();E.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new E(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:E,providedIn:"root"}),E.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var j=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.validate=function(e,r,t){return this.http.post(this.serverService.query("projects/validate",t),{id:e,name:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjects=function(e){return this.http.get(this.serverService.query("projects",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProject=function(e,r){return this.http.get(this.serverService.query("projects/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectItems=function(e,r,t,n,i,p){var c=[];return r&&c.push({name:"libraries",content:r}),t&&c.push({name:"meta",content:t}),this.http.get(this.serverService.query("projects/"+e+"/items",i,p,n,c)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectLibraries=function(e,r){return this.http.get(this.serverService.query("projects/"+e+"/libraries",r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectLibrary=function(e,r,t){return this.http.get(this.serverService.query("projects/"+e+"/libraries/"+r,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addProject=function(e,r){return this.http.post(this.serverService.query("projects/new",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateProject=function(e,r){return this.http.post(this.serverService.query("projects/"+e.id+"/update",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteProject=function(e){return this.http.get(this.serverService.query("projects/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.exportProject=function(e){return this.http.get(this.serverService.query("projects/"+e+"/export")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.importProject=function(e,r){var t=new FormData;return t.append("file",r),this.http.post(this.serverService.query("projects/"+e+"/import"),t,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addProjectMeta=function(e,r,t){return this.http.post(this.serverService.query("projects/"+e+"/metadata/new",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateProjectMeta=function(e,r,t){return this.http.post(this.serverService.query("projects/"+e+"/metadata/"+r.name+"/update",t),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteProjectMeta=function(e,r){return this.http.get(this.serverService.query("projects/"+e+"/metadata/"+r.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e}();j.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new j(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:j,providedIn:"root"}),j.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var S=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getProviders=function(){return this.http.get(this.serverService.apiServer+"/auth/providers").pipe(o.retry(1),o.catchError(h.handleError))},e}();S.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new S(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:S,providedIn:"root"}),S.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],S.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var m=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getReturn=function(e,r){return this.http.get(this.serverService.query("returns/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e}();m.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new m(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:m,providedIn:"root"}),m.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var b=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getScenarios=function(){return this.http.get(this.serverService.query("scenarios")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getScenario=function(e){return this.http.get(this.serverService.query("scenarios/"+e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();b.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new b(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:b,providedIn:"root"}),b.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var I=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getSettings=function(e){return this.http.get(this.serverService.query("settings",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getSetting=function(e,r){return this.http.get(this.serverService.query("settings/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateSetting=function(e,r){return this.http.post(this.serverService.query("settings/"+name+"/update",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getDefaults=function(e){return this.http.get(this.serverService.query("settings/defaults",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();I.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new I(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:I,providedIn:"root"}),I.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var q=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getSynthesizers=function(e){return this.http.get(this.serverService.query("synthesizers",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();q.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new q(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:q,providedIn:"root"}),q.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],q.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var H=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.getVersion=function(e){return this.http.get(this.serverService.query("system/version",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getModules=function(e){return this.http.get(this.serverService.query("system/modules",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLogs=function(e){return this.http.get(this.serverService.query("system/logs",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();H.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new H(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:H,providedIn:"root"}),H.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],H.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var P=function(){function e(e,r){this.http=e,this.serverService=r}return e.prototype.upload=function(e){var r=new FormData;return r.append("file",e),this.http.post(this.serverService.query("upload"),r,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},e}();P.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new P(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:P,providedIn:"root"}),P.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var C=function(){function e(e,r){this.http=e,this.serverService=r,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getLoggedUser=function(e){return this.http.get(this.serverService.query("users/me",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getUsers=function(e){return this.http.get(this.serverService.query("users",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getUser=function(e,r){return this.http.get(this.serverService.query("users/"+e,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteUser=function(e){return this.http.get(this.serverService.query("users/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateUser=function(e,r){return this.http.post(this.serverService.query("users/"+e.id+"/update",r),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e}();C.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new C(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:C,providedIn:"root"}),C.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],C.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var w=Object.freeze({__proto__:null,get EventStatus(){return i},get ItemType(){return p},get QueryOperator(){return c},get RoleType(){return s},get ScenarioType(){return a},ErrorHelper:h,MetaHelper:u,ActionService:d,ConnectorService:v,EventService:f,GeneratorService:l,ItemService:g,LibraryService:E,ProjectService:j,ProviderService:S,ReturnService:m,ScenarioService:b,ServerService:y,SettingService:I,SynthesizerService:q,SystemService:H,UploadService:P,UserService:C});e.narra=w,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=narra-api.umd.min.js.map