!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("@angular/common/http"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@narra/api",["exports","rxjs","@angular/core","@angular/common/http","rxjs/operators"],e):e(((r="undefined"!=typeof globalThis?globalThis:r||self).narra=r.narra||{},r.narra.api={}),r.rxjs,r.ng.core,r.ng.common.http,r.rxjs.operators)}(this,(function(r,e,t,n,o){"use strict";var i,p,c,s,a;!function(r){r.pending="pending",r.running="running",r.done="done"}(i||(i={})),function(r){r.text="text",r.audio="audio",r.video="video",r.picture="picture"}(p||(p={})),function(r){r.or="or",r.and="and"}(c||(c={})),function(r){r.admin="admin",r.author="author"}(s||(s={})),function(r){r.project="project",r.library="library"}(a||(a={}));var h=function(){function r(){}return r.handleError=function(r){return r.error instanceof ErrorEvent?console.error("An error occurred:",r.error.message):console.error("Backend returned code "+r.status+", body was: "+r.error),e.throwError("Something bad happened; please try again later.")},r}(),u=function(){function r(){}return r.getMeta=function(r,e){return r.metadata.find((function(r){return r.name===e}))},r}(),y=function(){function r(){this.server="http://api.narra",this.version=1,this.initialized=!1}return r.prototype.initialize=function(r,e){r&&(this.server=r),e&&(this.version=e),this.initialized=!0},Object.defineProperty(r.prototype,"apiServer",{get:function(){return this.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"apiVersion",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInitialized",{get:function(){return this.initialized},enumerable:!1,configurable:!0}),r.prototype.query=function(r,e,t,n,o){var i=r+"?";return e&&e.filters.forEach((function(r){i+="filters[]="+r+"&"})),o&&o.forEach((function(r){r.content.forEach((function(e){i+=r.name+"[]="+e+"&"}))})),n&&(i+="query="+n.query+"&",n.queryOperator&&(i+="query_operator="+n.queryOperator+"&"),n.queryFields&&n.queryFields.forEach((function(r){i+="query_fields[]="+r+"&"}))),t&&(i+="page="+t.page+"&per_page="+t.perPage+"&offset="+t.offset),this.server+"/v"+this.version+"/"+i},r}();y.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new y},token:y,providedIn:"root"}),y.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],y.ctorParameters=function(){return[]};var d=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.getActions=function(r){return this.http.get(this.serverService.query("actions",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.performAction=function(r,e,t){return this.http.post(this.serverService.query("actions/"+e.identifier+"/perform",t),{items:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r}();d.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new d(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:d,providedIn:"root"}),d.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var v=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getConnectors=function(r){return this.http.get(this.serverService.query("connectors",r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();v.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new v(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:v,providedIn:"root"}),v.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var f=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getEvents=function(r,e){return void 0===r&&(r="me"),this.http.get(this.serverService.query("events/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r}();f.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new f(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:f,providedIn:"root"}),f.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var l=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getGenerators=function(r){return this.http.get(this.serverService.query("generators",r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();l.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new l(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:l,providedIn:"root"}),l.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var E=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.check=function(r,e){return this.http.post(this.serverService.query("items/check",e),{url:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addItems=function(r,e){return this.http.post(this.serverService.query("items/new",e),{candidates:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getItem=function(r,e){return this.http.get(this.serverService.query("items/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addItemMeta=function(r,e,t){return this.http.post(this.serverService.query("items/"+r+"/metadata/new",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateItemMeta=function(r,e,t){return this.http.post(this.serverService.query("items/"+r+"/metadata/"+e.name+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteItemMeta=function(r,e){return this.http.get(this.serverService.query("items/"+r+"/metadata/"+e.name+"/delete?generator="+e.generator)).pipe(o.retry(1),o.catchError(h.handleError))},r}();E.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new E(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:E,providedIn:"root"}),E.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var g=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.validate=function(r,e){return this.http.post(this.serverService.query("libraries/validate",e),{name:r},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getLibraries=function(r){return this.http.get(this.serverService.query("libraries",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getLibrary=function(r,e){return this.http.get(this.serverService.query("libraries/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getItems=function(r,e,t,n){return this.http.get(this.serverService.query("libraries/"+r+"/items",e,t,n)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteItems=function(r,e){return this.http.post(this.serverService.query("libraries/"+r+"/items/delete"),{items:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addLibrary=function(r,e){return this.http.post(this.serverService.query("libraries/new",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateLibrary=function(r,e){return this.http.post(this.serverService.query("libraries/"+r.id+"/update",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.cleanLibrary=function(r){return this.http.get(this.serverService.query("libraries/"+r+"/clean")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteLibrary=function(r){return this.http.get(this.serverService.query("libraries/"+r+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.exportLibrary=function(r){return this.http.get(this.serverService.query("libraries/"+r+"/export")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.importLibrary=function(r,e){var t=new FormData;return t.append("file",e),this.http.post(this.serverService.query("libraries/"+r+"/import"),t,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.copyLibrary=function(r,e){return this.http.post(this.serverService.query("libraries/"+r+"/copy"),{destination:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addLibraryMeta=function(r,e,t){return this.http.post(this.serverService.query("libraries/"+r+"/metadata/new",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateLibraryMeta=function(r,e,t){return this.http.post(this.serverService.query("libraries/"+r+"/metadata/"+e.name+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteLibraryMeta=function(r,e){return this.http.get(this.serverService.query("libraries/"+r+"/metadata/"+e.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},r}();g.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new g(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:g,providedIn:"root"}),g.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],g.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var j=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.validate=function(r,e,t){return this.http.post(this.serverService.query("projects/validate",t),{id:r,name:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getProjects=function(r){return this.http.get(this.serverService.query("projects",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getProject=function(r,e){return this.http.get(this.serverService.query("projects/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getProjectItems=function(r,e,t,n,i,p){var c=[];return e&&c.push({name:"libraries",content:e}),t&&c.push({name:"meta",content:t}),this.http.get(this.serverService.query("projects/"+r+"/items",i,p,n,c)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getProjectLibraries=function(r,e){return this.http.get(this.serverService.query("projects/"+r+"/libraries",e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getProjectLibrary=function(r,e,t){return this.http.get(this.serverService.query("projects/"+r+"/libraries/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addProject=function(r,e){return this.http.post(this.serverService.query("projects/new",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateProject=function(r,e){return this.http.post(this.serverService.query("projects/"+r.id+"/update",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteProject=function(r){return this.http.get(this.serverService.query("projects/"+r+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.exportProject=function(r){return this.http.get(this.serverService.query("projects/"+r+"/export")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.importProject=function(r,e){var t=new FormData;return t.append("file",e),this.http.post(this.serverService.query("projects/"+r+"/import"),t,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.copyProject=function(r,e){return this.http.post(this.serverService.query("projects/"+r+"/copy"),{destination:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.addProjectMeta=function(r,e,t){return this.http.post(this.serverService.query("projects/"+r+"/metadata/new",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateProjectMeta=function(r,e,t){return this.http.post(this.serverService.query("projects/"+r+"/metadata/"+e.name+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteProjectMeta=function(r,e){return this.http.get(this.serverService.query("projects/"+r+"/metadata/"+e.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},r}();j.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new j(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:j,providedIn:"root"}),j.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var S=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getProviders=function(){return this.http.get(this.serverService.apiServer+"/auth/providers").pipe(o.retry(1),o.catchError(h.handleError))},r}();S.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new S(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:S,providedIn:"root"}),S.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],S.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var m=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getReturn=function(r,e){return this.http.get(this.serverService.query("returns/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r}();m.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new m(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:m,providedIn:"root"}),m.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var b=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getScenarios=function(){return this.http.get(this.serverService.query("scenarios")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getScenario=function(r){return this.http.get(this.serverService.query("scenarios/"+r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();b.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new b(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:b,providedIn:"root"}),b.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var I=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.getSettings=function(r){return this.http.get(this.serverService.query("settings",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getSetting=function(r,e){return this.http.get(this.serverService.query("settings/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateSetting=function(r,e){return this.http.post(this.serverService.query("settings/"+name+"/update",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getDefaults=function(r){return this.http.get(this.serverService.query("settings/defaults",r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();I.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new I(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:I,providedIn:"root"}),I.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var q=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getSynthesizers=function(r){return this.http.get(this.serverService.query("synthesizers",r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();q.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new q(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:q,providedIn:"root"}),q.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],q.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var H=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.getVersion=function(r){return this.http.get(this.serverService.query("system/version",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getModules=function(r){return this.http.get(this.serverService.query("system/modules",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getLogs=function(r){return this.http.get(this.serverService.query("system/logs",r)).pipe(o.retry(1),o.catchError(h.handleError))},r}();H.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new H(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:H,providedIn:"root"}),H.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],H.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var P=function(){function r(r,e){this.http=r,this.serverService=e}return r.prototype.upload=function(r){var e=new FormData;return e.append("file",r),this.http.post(this.serverService.query("upload"),e,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},r}();P.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new P(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:P,providedIn:"root"}),P.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var C=function(){function r(r,e){this.http=r,this.serverService=e,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return r.prototype.getLoggedUser=function(r){return this.http.get(this.serverService.query("users/me",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getUsers=function(r){return this.http.get(this.serverService.query("users",r)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.getUser=function(r,e){return this.http.get(this.serverService.query("users/"+r,e)).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.deleteUser=function(r){return this.http.get(this.serverService.query("users/"+r+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},r.prototype.updateUser=function(r,e){return this.http.post(this.serverService.query("users/"+r.id+"/update",e),r,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},r}();C.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new C(t.ɵɵinject(n.HttpClient),t.ɵɵinject(y))},token:C,providedIn:"root"}),C.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],C.ctorParameters=function(){return[{type:n.HttpClient},{type:y}]};var O=Object.freeze({__proto__:null,get EventStatus(){return i},get ItemType(){return p},get QueryOperator(){return c},get RoleType(){return s},get ScenarioType(){return a},ErrorHelper:h,MetaHelper:u,ActionService:d,ConnectorService:v,EventService:f,GeneratorService:l,ItemService:E,LibraryService:g,ProjectService:j,ProviderService:S,ReturnService:m,ScenarioService:b,ServerService:y,SettingService:I,SynthesizerService:q,SystemService:H,UploadService:P,UserService:C});r.narra=O,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=narra-api.umd.min.js.map