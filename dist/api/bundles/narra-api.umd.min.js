!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core"),require("@angular/common/http"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@narra/api",["exports","rxjs","@angular/core","@angular/common/http","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).narra=e.narra||{},e.narra.api={}),e.rxjs,e.ng.core,e.ng.common.http,e.rxjs.operators)}(this,(function(e,t,r,n,o){"use strict";var i,p,c,s,a;!function(e){e.pending="pending",e.running="running",e.done="done"}(i||(i={})),function(e){e.text="text",e.audio="audio",e.video="video",e.picture="picture"}(p||(p={})),function(e){e.or="or",e.and="and"}(c||(c={})),function(e){e.admin="admin",e.author="author"}(s||(s={})),function(e){e.project="project",e.library="library"}(a||(a={}));var h=function(){function e(){}return e.handleError=function(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("Backend returned code "+e.status+", body was: "+e.error),t.throwError("Something bad happened; please try again later.")},e}(),u=function(){function e(){}return e.getMeta=function(e,t){return e.metadata.find((function(e){return e.name===t}))},e}(),d=function(){function e(){this.server="http://api.narra",this.version=1,this.initialized=!1}return e.prototype.initialize=function(e,t){e&&(this.server=e),t&&(this.version=t),this.initialized=!0},Object.defineProperty(e.prototype,"apiServer",{get:function(){return this.server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiVersion",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.initialized},enumerable:!1,configurable:!0}),e.prototype.query=function(e,t,r,n,o){var i=e+"?";return t&&t.filters.forEach((function(e){i+="filters[]="+e+"&"})),o&&o.forEach((function(e){e.content.forEach((function(t){i+=e.name+"[]="+t+"&"}))})),n&&(i+="query="+n.query+"&",n.queryOperator&&(i+="query_operator="+n.queryOperator+"&"),n.queryFields&&n.queryFields.forEach((function(e){i+="query_fields[]="+e+"&"}))),r&&(i+="page="+r.page+"&per_page="+r.perPage+"&offset="+r.offset),this.server+"/v"+this.version+"/"+i},e}();d.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new d},token:d,providedIn:"root"}),d.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[]};var y=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getActions=function(e){return this.http.get(this.serverService.query("actions",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.performAction=function(e,t,r){return this.http.post(this.serverService.query("actions/"+t.identifier+"/perform",r),{items:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e}();y.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new y(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:y,providedIn:"root"}),y.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],y.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var v=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getConnectors=function(e){return this.http.get(this.serverService.query("connectors",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();v.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new v(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:v,providedIn:"root"}),v.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var f=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getEvents=function(e,t){return void 0===e&&(e="me"),this.http.get(this.serverService.query("events/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e}();f.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new f(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:f,providedIn:"root"}),f.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var l=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getGenerators=function(e){return this.http.get(this.serverService.query("generators",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();l.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new l(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:l,providedIn:"root"}),l.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var g=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.check=function(e,t){return this.http.post(this.serverService.query("items/check",t),{url:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addItems=function(e,t){return this.http.post(this.serverService.query("items/new",t),{candidates:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getItem=function(e,t){return this.http.get(this.serverService.query("items/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addItemMeta=function(e,t,r){return this.http.post(this.serverService.query("items/"+e+"/metadata/new",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateItemMeta=function(e,t,r){return this.http.post(this.serverService.query("items/"+e+"/metadata/"+t.name+"/update",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteItemMeta=function(e,t){return this.http.get(this.serverService.query("items/"+e+"/metadata/"+t.name+"/delete?generator="+t.generator)).pipe(o.retry(1),o.catchError(h.handleError))},e}();g.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new g(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:g,providedIn:"root"}),g.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],g.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var E=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.validate=function(e,t){return this.http.post(this.serverService.query("libraries/validate",t),{name:e},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLibraries=function(e){return this.http.get(this.serverService.query("libraries",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLibrary=function(e,t){return this.http.get(this.serverService.query("libraries/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getItems=function(e,t,r,n){return this.http.get(this.serverService.query("libraries/"+e+"/items",t,r,n)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteItems=function(e,t){return this.http.post(this.serverService.query("libraries/"+e+"/items/delete"),{items:t},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addLibrary=function(e,t){return this.http.post(this.serverService.query("libraries/new",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateLibrary=function(e,t){return this.http.post(this.serverService.query("libraries/"+e.id+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.cleanLibrary=function(e){return this.http.get(this.serverService.query("libraries/"+e+"/clean")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteLibrary=function(e){return this.http.get(this.serverService.query("libraries/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addLibraryMeta=function(e,t,r){return this.http.post(this.serverService.query("libraries/"+e+"/metadata/new",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateLibraryMeta=function(e,t,r){return this.http.post(this.serverService.query("libraries/"+e+"/metadata/"+t.name+"/update",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteLibraryMeta=function(e,t){return this.http.get(this.serverService.query("libraries/"+e+"/metadata/"+t.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e}();E.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new E(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:E,providedIn:"root"}),E.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var j=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.validate=function(e,t,r){return this.http.post(this.serverService.query("projects/validate",r),{id:e,name:t},this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjects=function(e){return this.http.get(this.serverService.query("projects",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProject=function(e,t){return this.http.get(this.serverService.query("projects/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectItems=function(e,t,r,n,i,p){var c=[];return t&&c.push({name:"libraries",content:t}),r&&c.push({name:"meta",content:r}),this.http.get(this.serverService.query("projects/"+e+"/items",i,p,n,c)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectLibraries=function(e,t){return this.http.get(this.serverService.query("projects/"+e+"/libraries",t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getProjectLibrary=function(e,t,r){return this.http.get(this.serverService.query("projects/"+e+"/libraries/"+t,r)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addProject=function(e,t){return this.http.post(this.serverService.query("projects/new",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateProject=function(e,t){return this.http.post(this.serverService.query("projects/"+e.id+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteProject=function(e){return this.http.get(this.serverService.query("projects/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.addProjectMeta=function(e,t,r){return this.http.post(this.serverService.query("projects/"+e+"/metadata/new",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateProjectMeta=function(e,t,r){return this.http.post(this.serverService.query("projects/"+e+"/metadata/"+t.name+"/update",r),t,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteProjectMeta=function(e,t){return this.http.get(this.serverService.query("projects/"+e+"/metadata/"+t.name+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e}();j.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new j(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:j,providedIn:"root"}),j.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var S=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getProviders=function(){return this.http.get(this.serverService.apiServer+"/auth/providers").pipe(o.retry(1),o.catchError(h.handleError))},e}();S.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new S(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:S,providedIn:"root"}),S.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],S.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var m=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getReturn=function(e,t){return this.http.get(this.serverService.query("returns/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e}();m.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new m(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:m,providedIn:"root"}),m.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var b=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getScenarios=function(){return this.http.get(this.serverService.query("scenarios")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getScenario=function(e){return this.http.get(this.serverService.query("scenarios/"+e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();b.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new b(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:b,providedIn:"root"}),b.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var I=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getSettings=function(e){return this.http.get(this.serverService.query("settings",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getSetting=function(e,t){return this.http.get(this.serverService.query("settings/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateSetting=function(e,t){return this.http.post(this.serverService.query("settings/"+name+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getDefaults=function(e){return this.http.get(this.serverService.query("settings/defaults",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();I.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new I(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:I,providedIn:"root"}),I.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var q=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getSynthesizers=function(e){return this.http.get(this.serverService.query("synthesizers",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();q.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new q(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:q,providedIn:"root"}),q.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],q.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var H=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.getVersion=function(e){return this.http.get(this.serverService.query("system/version",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getModules=function(e){return this.http.get(this.serverService.query("system/modules",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getLogs=function(e){return this.http.get(this.serverService.query("system/logs",e)).pipe(o.retry(1),o.catchError(h.handleError))},e}();H.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new H(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:H,providedIn:"root"}),H.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],H.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var C=function(){function e(e,t){this.http=e,this.serverService=t}return e.prototype.upload=function(e){var t=new FormData;return t.append("file",e),this.http.post(this.serverService.query("upload"),t,{reportProgress:!0,observe:"events"}).pipe(o.retry(1),o.catchError(h.handleError))},e}();C.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new C(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:C,providedIn:"root"}),C.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],C.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var P=function(){function e(e,t){this.http=e,this.serverService=t,this.httpOptions={headers:new n.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getLoggedUser=function(e){return this.http.get(this.serverService.query("users/me",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getUsers=function(e){return this.http.get(this.serverService.query("users",e)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.getUser=function(e,t){return this.http.get(this.serverService.query("users/"+e,t)).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.deleteUser=function(e){return this.http.get(this.serverService.query("users/"+e+"/delete")).pipe(o.retry(1),o.catchError(h.handleError))},e.prototype.updateUser=function(e,t){return this.http.post(this.serverService.query("users/"+e.id+"/update",t),e,this.httpOptions).pipe(o.retry(1),o.catchError(h.handleError))},e}();P.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new P(r.ɵɵinject(n.HttpClient),r.ɵɵinject(d))},token:P,providedIn:"root"}),P.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:n.HttpClient},{type:d}]};var O=Object.freeze({__proto__:null,get EventStatus(){return i},get ItemType(){return p},get QueryOperator(){return c},get RoleType(){return s},get ScenarioType(){return a},ErrorHelper:h,MetaHelper:u,ActionService:y,ConnectorService:v,EventService:f,GeneratorService:l,ItemService:g,LibraryService:E,ProjectService:j,ProviderService:S,ReturnService:m,ScenarioService:b,ServerService:d,SettingService:I,SynthesizerService:q,SystemService:H,UploadService:C,UserService:P});e.narra=O,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=narra-api.umd.min.js.map